import{E as v,Fa as U,G as y,Ga as W,Ia as p,K as a,L as E,O as P,P as O,Q as k,Z as F,ba as A,fa as I,g as c,ga as T,ia as z,j as m,ja as R,k as f,ka as B,l as S,la as D,m as L,ma as N,n as s,na as G,o as u,oa as _,p as M,q as h,r as b,ra as H,ta as V,ua as j,v as g,w as t,x as r,xa as Y,y as l}from"./chunk-RMQUFD5B.js";import"./chunk-C6Q5SG76.js";function $(e,n){e&1&&(m(),t(0,"svg",29),l(1,"path",30)(2,"circle",31),r())}function ee(e,n){e&1&&(m(),t(0,"svg",29),l(1,"path",32)(2,"line",33),r())}function te(e,n){if(e&1&&(t(0,"div",21),a(1),r()),e&2){let i=y();s(),E(i.errorMessage)}}function ne(e,n){e&1&&(t(0,"span"),a(1,"Iniciar Sesi\xF3n"),r())}function oe(e,n){e&1&&(t(0,"span",27),m(),t(1,"svg",35),l(2,"circle",36),r(),a(3," Cargando... "),r())}function ie(e,n){if(e&1&&M(0,oe,4,0,"span",34),e&2){let i=y();g("ngIf",i.isLoading)}}var x=class e{showPassword=!1;isLoading=!1;errorMessage="";authService=c(p);router=c(_);dataForm={usuario:"",password:""};togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(!this.dataForm.usuario||!this.dataForm.password){this.errorMessage="Por favor completa todos los campos";return}this.isLoading=!0,this.errorMessage="",this.authService.login(this.dataForm).subscribe({next:n=>{console.log("Login exitoso:",n),this.authService.saveAuthData(n.token,n),this.router.navigate(["/admin/dashboard"])},error:n=>{console.error("Error en login:",n),this.isLoading=!1,n.status===401?this.errorMessage="Usuario o contrase\xF1a incorrectos":n.status===0?this.errorMessage="No se pudo conectar con el servidor":this.errorMessage="Error al iniciar sesi\xF3n. Intenta nuevamente"},complete:()=>{this.isLoading=!1}})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=u({type:e,selectors:[["app-login"]],decls:45,vars:9,consts:[[1,"login-container"],[1,"login-wrapper"],[1,"login-card"],[1,"login-header"],[1,"logo-circle"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"lock-icon"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"title"],[1,"subtitle"],[1,"login-form"],[1,"form-group"],[1,"form-label"],[1,"input-wrapper"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"input-icon"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["type","text","placeholder","tu usuario...","required","",1,"form-input",3,"ngModelChange","ngModel"],["placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-input","password-input",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"error-message"],[1,"form-options"],[1,"checkbox-label"],["type","checkbox",1,"checkbox"],["type","button",1,"forgot-link"],["type","button",1,"submit-btn",3,"click","disabled"],[1,"spinner-wrapper"],[1,"footer-text"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"],["class","spinner-wrapper",4,"ngIf"],["viewBox","0 0 50 50",1,"spinner"],["cx","25","cy","25","r","20","fill","none","stroke-width","5",1,"spinner-path"]],template:function(i,o){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(),t(5,"svg",5),l(6,"rect",6)(7,"path",7),r()(),f(),t(8,"h1",8),a(9,"Bienvenido"),r(),t(10,"p",9),a(11,"Inicia sesi\xF3n en tu cuenta"),r()(),t(12,"div",10)(13,"div",11)(14,"label",12),a(15,"Usuario"),r(),t(16,"div",13),m(),t(17,"svg",14),l(18,"path",15)(19,"circle",16),r(),f(),t(20,"input",17),k("ngModelChange",function(d){return O(o.dataForm.usuario,d)||(o.dataForm.usuario=d),d}),r()()(),t(21,"div",11)(22,"label",12),a(23,"Contrase\xF1a"),r(),t(24,"div",13),m(),t(25,"svg",14),l(26,"rect",6)(27,"path",7),r(),f(),t(28,"input",18),k("ngModelChange",function(d){return O(o.dataForm.password,d)||(o.dataForm.password=d),d}),r(),t(29,"button",19),v("click",function(){return o.togglePassword()}),M(30,$,3,0,"svg",20)(31,ee,3,0,"svg",20),r()()(),h(32,te,2,1,"div",21),t(33,"div",22)(34,"label",23),l(35,"input",24),t(36,"span"),a(37,"Recordarme"),r()(),t(38,"button",25),a(39,"\xBFOlvidaste tu contrase\xF1a?"),r()(),t(40,"button",26),v("click",function(){return o.onSubmit()}),h(41,ne,2,0,"span"),h(42,ie,1,1,"span",27),r()()(),t(43,"p",28),a(44,"\xA9 2024 Tu Empresa. Todos los derechos reservados."),r()()()),i&2&&(s(20),P("ngModel",o.dataForm.usuario),s(8),g("type",o.showPassword?"text":"password"),P("ngModel",o.dataForm.password),s(2),g("ngIf",!o.showPassword),s(),g("ngIf",o.showPassword),s(),b(o.errorMessage?32:-1),s(8),g("disabled",o.isLoading),s(),b(o.isLoading?-1:41),s(),b(o.isLoading?42:-1))},dependencies:[I,A,W,V,j,U,Y],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);padding:1rem}.login-card[_ngcontent-%COMP%]{width:100%;max-width:28rem;background:#fffffff2;border-radius:1rem;box-shadow:0 25px 50px -12px #00000040;padding:2rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-circle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:4rem;height:4rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;margin-bottom:1rem}.lock-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;color:#fff}.title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#1f2937;margin:0 0 .5rem}.subtitle[_ngcontent-%COMP%]{color:#6b7280;margin:0;font-size:1rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);width:1.25rem;height:1.25rem;color:#9ca3af;pointer-events:none}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:1rem;outline:none;transition:all .2s;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{border-color:transparent;box-shadow:0 0 0 2px #667eea}.password-input[_ngcontent-%COMP%]{padding-right:3rem}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;cursor:pointer;padding:.25rem;display:flex;align-items:center;transition:color .2s}.toggle-password[_ngcontent-%COMP%]:hover{color:#4b5563}.toggle-password[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.form-options[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:.875rem;color:#4b5563}.checkbox[_ngcontent-%COMP%]{width:1rem;height:1rem;margin-right:.5rem;cursor:pointer;accent-color:#667eea}.forgot-link[_ngcontent-%COMP%]{font-size:.875rem;color:#667eea;font-weight:500;text-decoration:none;transition:color .2s}.forgot-link[_ngcontent-%COMP%]:hover{color:#5568d3}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 10px 15px -3px #667eea66;font-family:inherit}.submit-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 15px 25px -3px #667eea80}.submit-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1.5rem 0}.divider-line[_ngcontent-%COMP%]{flex:1;height:1px;background-color:#d1d5db}.divider-text[_ngcontent-%COMP%]{padding:0 1rem;font-size:.875rem;color:#6b7280}.social-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;background:#fff;cursor:pointer;transition:all .2s;font-size:.875rem;font-weight:500;color:#374151;font-family:inherit}.social-btn[_ngcontent-%COMP%]:hover{background-color:#f9fafb;transform:translateY(-1px)}.social-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;margin-right:.5rem}.register-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:#4b5563}.register-link[_ngcontent-%COMP%]{color:#667eea;font-weight:600;text-decoration:none;margin-left:.25rem;transition:color .2s}.register-link[_ngcontent-%COMP%]:hover{color:#5568d3;text-decoration:underline}.footer-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:#fff}.error-message[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;padding:.6rem;border-radius:6px;font-size:.9rem;margin-bottom:1rem;text-align:center}@media (max-width: 640px){.login-card[_ngcontent-%COMP%]{padding:1.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem}.social-buttons[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-options[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.login-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.login-wrapper[_ngcontent-%COMP%]{width:100%;max-width:28rem;display:flex;flex-direction:column;align-items:center}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite;width:20px;height:20px}.spinner-path[_ngcontent-%COMP%]{stroke:#fff;stroke-linecap:round;animation:_ngcontent-%COMP%_dash 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}"]})};var q=(e,n)=>{let i=c(p),o=c(_);return i.isAuthenticated()?re()?(i.logout(),o.parseUrl("/login")):!0:o.parseUrl("/login")},re=()=>{let e=c(p),n=e.token;if(!n)return!0;let i=e.getPayload(n);if(!i?.exp)return!0;let o=Date.now()/1e3;return i.exp<o};var Z=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:x},{path:"admin",loadChildren:()=>import("./chunk-X2WUM3AN.js"),canActivateChild:[q]},{path:"**",redirectTo:"login"}];var J=(e,n)=>{let i=c(p).token;if(i!=null){let o=e.clone({headers:e.headers.set("Authorization",`Bearer ${i}`)});return n(o)}return n(e)};var K={providers:[S(),F(),H(Z),N(D()),z(B(),R([J]))]};var w=class e{title=L("puri-frontend");static \u0275fac=function(i){return new(i||e)};static \u0275cmp=u({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&l(0,"router-outlet")},dependencies:[G],encapsulation:2})};T(w,K).catch(e=>console.error(e));
